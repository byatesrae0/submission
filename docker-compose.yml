version: "3.5"
services:
  api:
    container_name: api
    image: api
    build:
      context: ./api/.
    command: -racing-endpoint racing:9000 -sports-endpoint sports:7000
    environment:
      - GRPC_GO_LOG_VERBOSITY_LEVEL=99
      - GRPC_GO_LOG_SEVERITY_LEVEL=info
    ports:
        - "${PORT:-8000}:${PORT:-8000}"
  racing:
    container_name: racing
    image: racing
    build:
      context: ./racing/.
    environment:
      - GRPC_GO_LOG_VERBOSITY_LEVEL=99
      - GRPC_GO_LOG_SEVERITY_LEVEL=info
    ports:
        - "${PORT:-9000}:${PORT:-9000}"
  sports:
    container_name: sports
    image: sports
    build:
      context: ./sports/.
    environment:
      - GRPC_GO_LOG_VERBOSITY_LEVEL=99
      - GRPC_GO_LOG_SEVERITY_LEVEL=info
    ports:
        - "${PORT:-7000}:${PORT:-7000}"
